{% extends 'base.html' %}

{% block title %}{{ dream_content['title'] }} - Блог Калиновського{% endblock %}

{% block scripts %}
	<script src="/resources/scripts/importance.js"></script>
{% endblock %}

{% block content %}
	<main>
		<div class="article-container" data-importance="{{ dream_content['importance'] }}">
			<article class="diary-entry">
				<!-- Кнопка удаления -->
				{% if is_admin %}
					<form method="post" action="{{ url_for('delete_dream', dream_title=dream_content['title']) }}">
						<input class="button-delete" type="submit" value="Видалити сновидіння">
					</form>
				{% endif %}
				<!-- Метаданные поста -->
				<h2 class="title">{{ dream_content['title'] }}</h2>
				<p class="description">{{ dream_content['mood'] }}</p>
				<p class="tags">Теги:</p>
				<ul class="tag-list">
					<li class="tag-item">
						{% if dream_content['tags'][0] == 'Особистий' %}
							<p class="tag-private-source">{{ dream_content['tags'][0] }}</p>
						{% else %}
							<p class="tag-source">{{ dream_content['tags'][0] }}</p>
						{% endif %}
						{% for tag in dream_content['tags'][1:] %}
							<p class="tag-source">{{ tag }}</p>
						{% endfor %}
					</li>
				</ul>
				<p class="importance" id="importance" data-content-type="dream">{{ dream_content['importance'] }}</p>
				<p class="date">Час сновидіння: {{ dream_content['dreamed_at'] }}</p>
				{% if is_admin %}
					{% if dream_content['published_at'] is not none %}
						<p class="date">Дата публікації у Блозі: {{ dream_content['published_at'] }}</p>
					{% endif %}
				{% endif %}
				<hr class="divider">
				<!-- Содержание поста -->
				<div class="content">{{ dream_content['content']|safe }}</div>
				<!-- Настройки поста -->
				{% if is_admin %}
					<form method="post" action="{{ url_for('update_dream', dream_title=dream_content['title']) }}">
						<input class="button-update" type="submit" value="Оновити сновидіння">
					</form>
				{% endif %}
			</article>
		</div>
	</main>
{% endblock %}
